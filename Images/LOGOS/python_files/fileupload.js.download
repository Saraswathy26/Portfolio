/*
 jQuery UI - v1.11.4+CommonJS - 2015-08-28
 http://jqueryui.com
 Includes: widget.js
 Copyright 2015 jQuery Foundation and other contributors; Licensed MIT  jQuery UI Widget 1.11.4
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/jQuery.widget/
*/
(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):"object"===typeof exports?b(require("jquery")):b(jQuery)})(function(b){var n=0,m=Array.prototype.slice;b.cleanData=function(a){return function(c){var f,d,e;for(e=0;null!=(d=c[e]);e++)try{(f=b._data(d,"events"))&&f.remove&&b(d).triggerHandler("remove")}catch(g){}a(c)}}(b.cleanData);b.widget=function(a,c,f){var d={},e=a.split(".")[0];a=a.split(".")[1];var g=e+"-"+a;f||(f=c,c=b.Widget);b.expr[":"][g.toLowerCase()]=function(a){return!!b.data(a,
g)};b[e]=b[e]||{};var h=b[e][a];var l=b[e][a]=function(a,b){if(!this._createWidget)return new l(a,b);arguments.length&&this._createWidget(a,b)};b.extend(l,h,{version:f.version,_proto:b.extend({},f),_childConstructors:[]});var k=new c;k.options=b.widget.extend({},k.options);b.each(f,function(a,f){b.isFunction(f)?d[a]=function(){var b=function(){return c.prototype[a].apply(this,arguments)},d=function(b){return c.prototype[a].apply(this,b)};return function(){var a=this._super,c=this._superApply;this._super=
b;this._superApply=d;var e=f.apply(this,arguments);this._super=a;this._superApply=c;return e}}():d[a]=f});l.prototype=b.widget.extend(k,{widgetEventPrefix:h?k.widgetEventPrefix||a:a},d,{constructor:l,namespace:e,widgetName:a,widgetFullName:g});h?(b.each(h._childConstructors,function(a,c){var d=c.prototype;b.widget(d.namespace+"."+d.widgetName,l,c._proto)}),delete h._childConstructors):c._childConstructors.push(l);b.widget.bridge(a,l);return l};b.widget.extend=function(a){for(var c=m.call(arguments,
1),f=0,d=c.length,e,g;f<d;f++)for(e in c[f])g=c[f][e],c[f].hasOwnProperty(e)&&void 0!==g&&(b.isPlainObject(g)?a[e]=b.isPlainObject(a[e])?b.widget.extend({},a[e],g):b.widget.extend({},g):a[e]=g);return a};b.widget.bridge=function(a,c){var f=c.prototype.widgetFullName||a;b.fn[a]=function(d){var e="string"===typeof d,g=m.call(arguments,1),h=this;e?this.each(function(){var c=b.data(this,f);if("instance"===d)return h=c,!1;if(!c)return b.error("cannot call methods on "+a+" prior to initialization; attempted to call method '"+
d+"'");if(!b.isFunction(c[d])||"_"===d.charAt(0))return b.error("no such method '"+d+"' for "+a+" widget instance");var e=c[d].apply(c,g);if(e!==c&&void 0!==e)return h=e&&e.jquery?h.pushStack(e.get()):e,!1}):(g.length&&(d=b.widget.extend.apply(null,[d].concat(g))),this.each(function(){var a=b.data(this,f);a?(a.option(d||{}),a._init&&a._init()):b.data(this,f,new c(d,this))}));return h}};b.Widget=function(){};b.Widget._childConstructors=[];b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",
defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(a,c){c=b(c||this.defaultElement||this)[0];this.element=b(c);this.uuid=n++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=b();this.hoverable=b();this.focusable=b();c!==this&&(b.data(c,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===c&&this.destroy()}}),this.document=b(c.style?c.ownerDocument:c.document||c),this.window=b(this.document[0].defaultView||this.document[0].parentWindow));
this.options=b.widget.extend({},this.options,this._getCreateOptions(),a);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:b.noop,_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(b.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");
this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:b.noop,widget:function(){return this.element},option:function(a,c){var f=a,d;if(0===arguments.length)return b.widget.extend({},this.options);if("string"===typeof a){f={};var e=a.split(".");a=e.shift();if(e.length){var g=f[a]=b.widget.extend({},this.options[a]);for(d=0;d<e.length-1;d++)g[e[d]]=g[e[d]]||{},g=g[e[d]];a=e.pop();if(1===arguments.length)return void 0===
g[a]?null:g[a];g[a]=c}else{if(1===arguments.length)return void 0===this.options[a]?null:this.options[a];f[a]=c}}this._setOptions(f);return this},_setOptions:function(a){for(var c in a)this._setOption(c,a[c]);return this},_setOption:function(a,c){this.options[a]=c;"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!c),c&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")));return this},enable:function(){return this._setOptions({disabled:!1})},
disable:function(){return this._setOptions({disabled:!0})},_on:function(a,c,f){var d,e=this;"boolean"!==typeof a&&(f=c,c=a,a=!1);f?(c=d=b(c),this.bindings=this.bindings.add(c)):(f=c,c=this.element,d=this.widget());b.each(f,function(f,h){function g(){if(a||!0!==e.options.disabled&&!b(this).hasClass("ui-state-disabled"))return("string"===typeof h?e[h]:h).apply(e,arguments)}"string"!==typeof h&&(g.guid=h.guid=h.guid||g.guid||b.guid++);var k=f.match(/^([\w:-]*)\s*(.*)$/),m=k[1]+e.eventNamespace;(k=k[2])?
d.delegate(k,m,g):c.bind(m,g)})},_off:function(a,c){c=(c||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(c).undelegate(c);this.bindings=b(this.bindings.not(a).get());this.focusable=b(this.focusable.not(a).get());this.hoverable=b(this.hoverable.not(a).get())},_delay:function(a,c){var b=this;return setTimeout(function(){return("string"===typeof a?b[a]:a).apply(b,arguments)},c||0)},_hoverable:function(a){this.hoverable=this.hoverable.add(a);this._on(a,{mouseenter:function(a){b(a.currentTarget).addClass("ui-state-hover")},
mouseleave:function(a){b(a.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(a){this.focusable=this.focusable.add(a);this._on(a,{focusin:function(a){b(a.currentTarget).addClass("ui-state-focus")},focusout:function(a){b(a.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(a,c,f){var d,e=this.options[a];f=f||{};c=b.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();c.target=this.element[0];if(a=c.originalEvent)for(d in a)d in c||
(c[d]=a[d]);this.element.trigger(c,f);return!(b.isFunction(e)&&!1===e.apply(this.element[0],[c].concat(f))||c.isDefaultPrevented())}};b.each({show:"fadeIn",hide:"fadeOut"},function(a,c){b.Widget.prototype["_"+a]=function(f,d,e){"string"===typeof d&&(d={effect:d});var g=d?!0===d||"number"===typeof d?c:d.effect||c:a;d=d||{};"number"===typeof d&&(d={duration:d});var h=!b.isEmptyObject(d);d.complete=e;d.delay&&f.delay(d.delay);if(h&&b.effects&&b.effects.effect[g])f[a](d);else if(g!==a&&f[g])f[g](d.duration,
d.easing,e);else f.queue(function(c){b(this)[a]();e&&e.call(f[0]);c()})}})});

(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):"object"===typeof exports?b(require("jquery")):b(window.jQuery)})(function(b){var l=0,h=b,f="parseJSON";"JSON"in window&&"parse"in JSON&&(h=JSON,f="parse");b.ajaxTransport("iframe",function(a){if(a.async){var k=a.initialIframeSrc||"javascript:false;",c,d,e;return{send:function(h,f){c=b('<form style="display:none;"></form>');c.attr("accept-charset",a.formAcceptCharset);e=/\?/.test(a.url)?"&":"?";"DELETE"===a.type?(a.url=a.url+
e+"_method=DELETE",a.type="POST"):"PUT"===a.type?(a.url=a.url+e+"_method=PUT",a.type="POST"):"PATCH"===a.type&&(a.url=a.url+e+"_method=PATCH",a.type="POST");l+=1;d=b('<iframe src="'+k+'" name="iframe-transport-'+l+'"></iframe>').bind("load",function(){var e=b.isArray(a.paramName)?a.paramName:[a.paramName];d.unbind("load").bind("load",function(){try{var a=d.contents();if(!a.length||!a[0].firstChild)throw Error();}catch(m){a=void 0}f(200,"success",{iframe:a});b('<iframe src="'+k+'"></iframe>').appendTo(c);
window.setTimeout(function(){c.remove()},0)});c.prop("target",d.prop("name")).prop("action",a.url).prop("method",a.type);a.formData&&b.each(a.formData,function(a,d){b('<input type="hidden"/>').prop("name",d.name).val(d.value).appendTo(c)});if(a.fileInput&&a.fileInput.length&&"POST"===a.type){var g=a.fileInput.clone();a.fileInput.after(function(a){return g[a]});a.paramName&&a.fileInput.each(function(c){b(this).prop("name",e[c]||a.paramName)});c.append(a.fileInput).prop("enctype","multipart/form-data").prop("encoding",
"multipart/form-data");a.fileInput.removeAttr("form")}c.submit();g&&g.length&&a.fileInput.each(function(a,c){var d=b(g[a]);b(c).prop("name",d.prop("name")).attr("form",d.attr("form"));d.replaceWith(c)})});c.append(d).appendTo(document.body)},abort:function(){d&&d.unbind("load").prop("src",k);c&&c.remove()}}}});b.ajaxSetup({converters:{"iframe text":function(a){return a&&b(a[0].body).text()},"iframe json":function(a){return a&&h[f](b(a[0].body).text())},"iframe html":function(a){return a&&b(a[0].body).html()},
"iframe xml":function(a){return(a=a&&a[0])&&b.isXMLDoc(a)?a:b.parseXML(a.XMLDocument&&a.XMLDocument.xml||b(a.body).html())},"iframe script":function(a){return a&&b.globalEval(b(a[0].body).text())}}})});

(function(e){"function"===typeof define&&define.amd?define(["jquery","jquery-ui/ui/widget"],e):"object"===typeof exports?e(require("jquery"),require("./vendor/jquery.ui.widget")):e(window.jQuery)})(function(e){function u(a){var b="dragover"===a;return function(c){c.dataTransfer=c.originalEvent&&c.originalEvent.dataTransfer;var d=c.dataTransfer;d&&-1!==e.inArray("Files",d.types)&&!1!==this._trigger(a,e.Event(a,{delegatedEvent:c}))&&(c.preventDefault(),b&&(d.dropEffect="copy"))}}e.support.fileInput=
!(/(Android (1\.[0156]|2\.[01]))|(Windows Phone (OS 7|8\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1\.0|2\.[05]|3\.0))/.test(window.navigator.userAgent)||e('<input type="file">').prop("disabled"));e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader);e.support.xhrFormDataFileUpload=!!window.FormData;e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);e.widget("blueimp.fileupload",{options:{dropZone:e(document),
pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},
i18n:function(a,b){a=this.messages[a]||a.toString();b&&e.each(b,function(b,d){a=a.replace("{"+b+"}",d)});return a},formData:function(a){return a.serializeArray()},add:function(a,b){if(a.isDefaultPrevented())return!1;(b.autoUpload||!1!==b.autoUpload&&e(this).fileupload("option","autoUpload"))&&b.process().done(function(){b.submit()})},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&
function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime();this.bitrate=this.loaded=0;this.getBitrate=function(a,b,c){var d=a-this.timestamp;if(!this.bitrate||!c||d>c)this.bitrate=1E3/d*(b-this.loaded)*8,this.loaded=b,this.timestamp=a;return this.bitrate}},_isXHRUpload:function(a){return!a.forceIframeTransport&&(!a.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(a){if("function"===
e.type(a.formData))return a.formData(a.form);if(e.isArray(a.formData))return a.formData;if("object"===e.type(a.formData)){var b=[];e.each(a.formData,function(a,d){b.push({name:a,value:d})});return b}return[]},_getTotal:function(a){var b=0;e.each(a,function(a,d){b+=d.size||1});return b},_initProgressObject:function(a){var b={loaded:0,total:0,bitrate:0};a._progress?e.extend(a._progress,b):a._progress=b},_initResponseObject:function(a){var b;if(a._response)for(b in a._response)a._response.hasOwnProperty(b)&&
delete a._response[b];else a._response={}},_onProgress:function(a,b){if(a.lengthComputable){var c=Date.now?Date.now():(new Date).getTime();if(!(b._time&&b.progressInterval&&c-b._time<b.progressInterval&&a.loaded!==a.total)){b._time=c;var d=Math.floor(a.loaded/a.total*(b.chunkSize||b._progress.total))+(b.uploadedBytes||0);this._progress.loaded+=d-b._progress.loaded;this._progress.bitrate=this._bitrateTimer.getBitrate(c,this._progress.loaded,b.bitrateInterval);b._progress.loaded=b.loaded=d;b._progress.bitrate=
b.bitrate=b._bitrateTimer.getBitrate(c,d,b.bitrateInterval);this._trigger("progress",e.Event("progress",{delegatedEvent:a}),b);this._trigger("progressall",e.Event("progressall",{delegatedEvent:a}),this._progress)}}},_initProgressListener:function(a){var b=this,c=a.xhr?a.xhr():e.ajaxSettings.xhr();c.upload&&(e(c.upload).bind("progress",function(c){var d=c.originalEvent;c.lengthComputable=d.lengthComputable;c.loaded=d.loaded;c.total=d.total;b._onProgress(c,a)}),a.xhr=function(){return c})},_isInstanceOf:function(a,
b){return Object.prototype.toString.call(b)==="[object "+a+"]"},_initXHRData:function(a){var b=this,c=a.files[0],d=a.multipart||!e.support.xhrFileUpload,f="array"===e.type(a.paramName)?a.paramName[0]:a.paramName;a.headers=e.extend({},a.headers);a.contentRange&&(a.headers["Content-Range"]=a.contentRange);d&&!a.blob&&this._isInstanceOf("File",c)||(a.headers["Content-Disposition"]='attachment; filename="'+encodeURI(c.name)+'"');if(!d)a.contentType=c.type||"application/octet-stream",a.data=a.blob||c;
else if(e.support.xhrFormDataFileUpload){if(a.postMessage){var g=this._getFormData(a);a.blob?g.push({name:f,value:a.blob}):e.each(a.files,function(b,c){g.push({name:"array"===e.type(a.paramName)&&a.paramName[b]||f,value:c})})}else b._isInstanceOf("FormData",a.formData)?g=a.formData:(g=new FormData,e.each(this._getFormData(a),function(a,b){g.append(b.name,b.value)})),a.blob?g.append(f,a.blob,c.name):e.each(a.files,function(c,d){(b._isInstanceOf("File",d)||b._isInstanceOf("Blob",d))&&g.append("array"===
e.type(a.paramName)&&a.paramName[c]||f,d,d.uploadName||d.name)});a.data=g}a.blob=null},_initIframeSettings:function(a){var b=e("<a></a>").prop("href",a.url).prop("host");a.dataType="iframe "+(a.dataType||"");a.formData=this._getFormData(a);a.redirect&&b&&b!==location.host&&a.formData.push({name:a.redirectParamName||"redirect",value:a.redirect})},_initDataSettings:function(a){this._isXHRUpload(a)?(this._chunkedUpload(a,!0)||(a.data||this._initXHRData(a),this._initProgressListener(a)),a.postMessage&&
(a.dataType="postmessage "+(a.dataType||""))):this._initIframeSettings(a)},_getParamName:function(a){var b=e(a.fileInput),c=a.paramName;c?e.isArray(c)||(c=[c]):(c=[],b.each(function(){for(var a=e(this),b=a.prop("name")||"files[]",a=(a.prop("files")||[1]).length;a;)c.push(b),--a}),c.length||(c=[b.prop("name")||"files[]"]));return c},_initFormSettings:function(a){a.form&&a.form.length||(a.form=e(a.fileInput.prop("form")),a.form.length||(a.form=e(this.options.fileInput.prop("form"))));a.paramName=this._getParamName(a);
a.url||(a.url=a.form.prop("action")||location.href);a.type=(a.type||"string"===e.type(a.form.prop("method"))&&a.form.prop("method")||"").toUpperCase();"POST"!==a.type&&"PUT"!==a.type&&"PATCH"!==a.type&&(a.type="POST");a.formAcceptCharset||(a.formAcceptCharset=a.form.attr("accept-charset"))},_getAJAXSettings:function(a){a=e.extend({},this.options,a);this._initFormSettings(a);this._initDataSettings(a);return a},_getDeferredState:function(a){return a.state?a.state():a.isResolved()?"resolved":a.isRejected()?
"rejected":"pending"},_enhancePromise:function(a){a.success=a.done;a.error=a.fail;a.complete=a.always;return a},_getXHRPromise:function(a,b,c){var d=e.Deferred(),f=d.promise();b=b||this.options.context||f;!0===a?d.resolveWith(b,c):!1===a&&d.rejectWith(b,c);f.abort=d.promise;return this._enhancePromise(f)},_addConvenienceMethods:function(a,b){var c=this,d=function(a){return e.Deferred().resolveWith(c,a).promise()};b.process=function(a,g){if(a||g)b._processQueue=this._processQueue=(this._processQueue||
d([this])).then(function(){return b.errorThrown?e.Deferred().rejectWith(c,[b]).promise():d(arguments)}).then(a,g);return this._processQueue||d([this])};b.submit=function(){"pending"!==this.state()&&(b.jqXHR=this.jqXHR=!1!==c._trigger("submit",e.Event("submit",{delegatedEvent:a}),this)&&c._onSend(a,this));return this.jqXHR||c._getXHRPromise()};b.abort=function(){if(this.jqXHR)return this.jqXHR.abort();this.errorThrown="abort";c._trigger("fail",null,this);return c._getXHRPromise(!1)};b.state=function(){if(this.jqXHR)return c._getDeferredState(this.jqXHR);
if(this._processQueue)return c._getDeferredState(this._processQueue)};b.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===c._getDeferredState(this._processQueue)};b.progress=function(){return this._progress};b.response=function(){return this._response}},_getUploadedBytes:function(a){return(a=(a=(a=a.getResponseHeader("Range"))&&a.split("-"))&&1<a.length&&parseInt(a[1],10))&&a+1},_chunkedUpload:function(a,b){a.uploadedBytes=a.uploadedBytes||0;var c=this,d=a.files[0],f=d.size,
g=a.uploadedBytes,h=a.maxChunkSize||f,k=this._blobSlice,l=e.Deferred(),p=l.promise(),m;if(!(this._isXHRUpload(a)&&k&&(g||h<f))||a.data)return!1;if(b)return!0;if(g>=f)return d.error=a.i18n("uploadedBytes"),this._getXHRPromise(!1,a.context,[null,"error",d.error]);var n=function(){var b=e.extend({},a),p=b._progress.loaded;b.blob=k.call(d,g,g+h,d.type);b.chunkSize=b.blob.size;b.contentRange="bytes "+g+"-"+(g+b.chunkSize-1)+"/"+f;c._initXHRData(b);c._initProgressListener(b);m=(!1!==c._trigger("chunksend",
null,b)&&e.ajax(b)||c._getXHRPromise(!1,b.context)).done(function(d,k,h){g=c._getUploadedBytes(h)||g+b.chunkSize;p+b.chunkSize-b._progress.loaded&&c._onProgress(e.Event("progress",{lengthComputable:!0,loaded:g-b.uploadedBytes,total:g-b.uploadedBytes}),b);a.uploadedBytes=b.uploadedBytes=g;b.result=d;b.textStatus=k;b.jqXHR=h;c._trigger("chunkdone",null,b);c._trigger("chunkalways",null,b);g<f?n():l.resolveWith(b.context,[d,k,h])}).fail(function(a,d,e){b.jqXHR=a;b.textStatus=d;b.errorThrown=e;c._trigger("chunkfail",
null,b);c._trigger("chunkalways",null,b);l.rejectWith(b.context,[a,d,e])})};this._enhancePromise(p);p.abort=function(){return m.abort()};n();return p},_beforeSend:function(a,b){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0);this._initResponseObject(b);this._initProgressObject(b);b._progress.loaded=b.loaded=b.uploadedBytes||0;b._progress.total=b.total=this._getTotal(b.files)||1;b._progress.bitrate=
b.bitrate=0;this._active+=1;this._progress.loaded+=b.loaded;this._progress.total+=b.total},_onDone:function(a,b,c,d){var f=d._progress.total,g=d._response;d._progress.loaded<f&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:f,total:f}),d);g.result=d.result=a;g.textStatus=d.textStatus=b;g.jqXHR=d.jqXHR=c;this._trigger("done",null,d)},_onFail:function(a,b,c,d){var e=d._response;d.recalculateProgress&&(this._progress.loaded-=d._progress.loaded,this._progress.total-=d._progress.total);
e.jqXHR=d.jqXHR=a;e.textStatus=d.textStatus=b;e.errorThrown=d.errorThrown=c;this._trigger("fail",null,d)},_onAlways:function(a,b,c,d){this._trigger("always",null,d)},_onSend:function(a,b){b.submit||this._addConvenienceMethods(a,b);var c=this,d,f,g=c._getAJAXSettings(b),h=function(){c._sending+=1;g._bitrateTimer=new c._BitrateTimer;return d=d||((f||!1===c._trigger("send",e.Event("send",{delegatedEvent:a}),g))&&c._getXHRPromise(!1,g.context,f)||c._chunkedUpload(g)||e.ajax(g)).done(function(a,b,d){c._onDone(a,
b,d,g)}).fail(function(a,b,d){c._onFail(a,b,d,g)}).always(function(a,b,d){c._onAlways(a,b,d,g);--c._sending;--c._active;if(g.limitConcurrentUploads&&g.limitConcurrentUploads>c._sending)for(a=c._slots.shift();a;){if("pending"===c._getDeferredState(a)){a.resolve();break}a=c._slots.shift()}0===c._active&&c._trigger("stop")})};this._beforeSend(a,g);if(this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending){if(1<this.options.limitConcurrentUploads){var k=
e.Deferred();this._slots.push(k);var l=k.then(h)}else l=this._sequence=this._sequence.then(h,h);l.abort=function(){f=[void 0,"abort","abort"];return d?d.abort():(k&&k.rejectWith(g.context,f),h())};return this._enhancePromise(l)}return h()},_onAdd:function(a,b){var c=this,d=!0,f=e.extend({},this.options,b),g=b.files,h=g.length,k=f.limitMultiFileUploads,l=f.limitMultiFileUploadSize,p=f.limitMultiFileUploadSizeOverhead,m=0,n=this._getParamName(f),t=0;if(!h)return!1;l&&void 0===g[0].size&&(l=void 0);
if((f.singleFileUploads||k||l)&&this._isXHRUpload(f))if(f.singleFileUploads||l||!k)if(!f.singleFileUploads&&l){var q=[];var r=[];for(f=0;f<h;f+=1)if(m+=g[f].size+p,f+1===h||m+g[f+1].size+p>l||k&&f+1-t>=k)q.push(g.slice(t,f+1)),m=n.slice(t,f+1),m.length||(m=n),r.push(m),t=f+1,m=0}else r=n;else for(q=[],r=[],f=0;f<h;f+=k)q.push(g.slice(f,f+k)),m=n.slice(f,f+k),m.length||(m=n),r.push(m);else q=[g],r=[n];b.originalFiles=g;e.each(q||g,function(g,f){var h=e.extend({},b);h.files=q?f:[f];h.paramName=r[g];
c._initResponseObject(h);c._initProgressObject(h);c._addConvenienceMethods(a,h);return d=c._trigger("add",e.Event("add",{delegatedEvent:a}),h)});return d},_replaceFileInput:function(a){var b=a.fileInput,c=b.clone(!0),d=b.is(document.activeElement);a.fileInputClone=c;e("<form></form>").append(c)[0].reset();b.after(c).detach();d&&c.focus();e.cleanData(b.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(a,d){return d===b[0]?c[0]:d});b[0]===this.element[0]&&(this.element=c)},
_handleFileTreeEntry:function(a,b){var c=this,d=e.Deferred(),f=[],g=function(b){b&&!b.entry&&(b.entry=a);d.resolve([b])},h=function(e){c._handleFileTreeEntries(e,b+a.name+"/").done(function(a){d.resolve(a)}).fail(g)},k=function(){l.readEntries(function(a){a.length?(f=f.concat(a),k()):h(f)},g)};b=b||"";if(a.isFile)a._file?(a._file.relativePath=b,d.resolve(a._file)):a.file(function(a){a.relativePath=b;d.resolve(a)},g);else if(a.isDirectory){var l=a.createReader();k()}else d.resolve([]);return d.promise()},
_handleFileTreeEntries:function(a,b){var c=this;return e.when.apply(e,e.map(a,function(a){return c._handleFileTreeEntry(a,b)})).then(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(a){a=a||{};var b=a.items;return b&&b.length&&(b[0].webkitGetAsEntry||b[0].getAsEntry)?this._handleFileTreeEntries(e.map(b,function(a){var b;if(a.webkitGetAsEntry){if(b=a.webkitGetAsEntry())b._file=a.getAsFile();return b}return a.getAsEntry()})):e.Deferred().resolve(e.makeArray(a.files)).promise()},
_getSingleFileInputFiles:function(a){a=e(a);var b=a.prop("webkitEntries")||a.prop("entries");if(b&&b.length)return this._handleFileTreeEntries(b);b=e.makeArray(a.prop("files"));if(b.length)void 0===b[0].name&&b[0].fileName&&e.each(b,function(a,b){b.name=b.fileName;b.size=b.fileSize});else{a=a.prop("value");if(!a)return e.Deferred().resolve([]).promise();b=[{name:a.replace(/^.*\\/,"")}]}return e.Deferred().resolve(b).promise()},_getFileInputFiles:function(a){return a instanceof e&&1!==a.length?e.when.apply(e,
e.map(a,this._getSingleFileInputFiles)).then(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(a)},_onChange:function(a){var b=this,c={fileInput:e(a.target),form:e(a.target.form)};this._getFileInputFiles(c.fileInput).always(function(d){c.files=d;b.options.replaceFileInput&&b._replaceFileInput(c);!1!==b._trigger("change",e.Event("change",{delegatedEvent:a}),c)&&b._onAdd(a,c)})},_onPaste:function(a){var b=a.originalEvent&&a.originalEvent.clipboardData&&a.originalEvent.clipboardData.items,
c={files:[]};b&&b.length&&(e.each(b,function(a,b){var e=b.getAsFile&&b.getAsFile();e&&c.files.push(e)}),!1!==this._trigger("paste",e.Event("paste",{delegatedEvent:a}),c)&&this._onAdd(a,c))},_onDrop:function(a){a.dataTransfer=a.originalEvent&&a.originalEvent.dataTransfer;var b=this,c=a.dataTransfer,d={};c&&c.files&&c.files.length&&(a.preventDefault(),this._getDroppedFiles(c).always(function(c){d.files=c;!1!==b._trigger("drop",e.Event("drop",{delegatedEvent:a}),d)&&b._onAdd(a,d)}))},_onDragOver:u("dragover"),
_onDragEnter:u("dragenter"),_onDragLeave:u("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste}));e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop");this._off(this.options.pasteZone,
"paste");this._off(this.options.fileInput,"change")},_destroy:function(){this._destroyEventHandlers()},_setOption:function(a,b){var c=-1!==e.inArray(a,this._specialOptions);c&&this._destroyEventHandlers();this._super(a,b);c&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var a=this.options;void 0===a.fileInput?a.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):a.fileInput instanceof e||(a.fileInput=e(a.fileInput));
a.dropZone instanceof e||(a.dropZone=e(a.dropZone));a.pasteZone instanceof e||(a.pasteZone=e(a.pasteZone))},_getRegExp:function(a){a=a.split("/");var b=a.pop();a.shift();return new RegExp(a.join("/"),b)},_isRegExpOption:function(a,b){return"url"!==a&&"string"===e.type(b)&&/^\/.*\/[igm]{0,3}$/.test(b)},_initDataAttributes:function(){var a=this,b=this.options,c=this.element.data();e.each(this.element[0].attributes,function(e,f){var d=f.name.toLowerCase();if(/^data-/.test(d)){d=d.slice(5).replace(/-[a-z]/g,
function(a){return a.charAt(1).toUpperCase()});var h=c[d];a._isRegExpOption(d,h)&&(h=a._getRegExp(h));b[d]=h}})},_create:function(){this._initDataAttributes();this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(!0);this._sending=this._active=0;this._initProgressObject(this);this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(a){var b=this;a&&!this.options.disabled&&(a.fileInput&&!a.files?this._getFileInputFiles(a.fileInput).always(function(c){a.files=
c;b._onAdd(null,a)}):(a.files=e.makeArray(a.files),this._onAdd(null,a)))},send:function(a){if(a&&!this.options.disabled){if(a.fileInput&&!a.files){var b=this,c=e.Deferred(),d=c.promise(),f,g;d.abort=function(){g=!0;if(f)return f.abort();c.reject(null,"abort","abort");return d};this._getFileInputFiles(a.fileInput).always(function(d){g||(d.length?(a.files=d,f=b._onSend(null,a),f.then(function(a,b,d){c.resolve(a,b,d)},function(a,b,d){c.reject(a,b,d)})):c.reject())});return this._enhancePromise(d)}a.files=
e.makeArray(a.files);if(a.files.length)return this._onSend(null,a)}return this._getXHRPromise(!1,a&&a.context)}})});